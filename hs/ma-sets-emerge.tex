%!TEX root = tales-main.tex


% Big theme here: Emergent properties
%	(i.e. what happens when we have this property (here, among members of sets)
%	we can get some interesting consequence (e.g. dimension))

\chapter{(Sets and Emergence)}

% Sth: "This might be the most boring way to start a chapter. In the past, we've talked about counting things -- here, we'll be talking about, quite literally, "things" (or more properly, collections of things)"


\section{(Sets -- collections of things)}

\begin{exercise}
What are the intersection and union of...
\begin{enumerate}[(a)]
\item ...the set $\{1, 2, 3\}$ and the set $\{2, 3, 4\}$?
\item ...the "null set" (the set with nothing in it) and any other set?
\item ...the set of all even integers, and the set of all odd integers?
\end{enumerate}
\end{exercise}

\begin{exercise}
What is the intersection of...
\begin{enumerate}[(a)]
\item ...the set of prime numbers, and the set of even numbers?
\item ...the set of integers divisible by 2, and the set of integers divisible by 3?
\end{enumerate}
\end{exercise}

% TODO: Need to have defined prime numbers at some point

\section{Problems}

%%%%%%%% Fixed-point iteration problems

\begin{problem}
\label{pr:fp-intro}
For any function $f$, we call $c$ a \textbf{fixed point} of $f$ if $f(c) = c$. 

(For functions involving real numbers, imagine fixed points as those points where the graph of $f(x)$ touches or crosses the line $y = x$.)

% TODO: Insert some figure here

\begin{enumerate}[(a)]
\item Find the fixed points of... 
\begin{enumerate}[i]
\item $f(x) = 3$
\item $f(x) = 2x + 1$
\item $f(x) = x^2$
\item $f(x) = x$
\item $f(x) = 1$ when $x$ is rational, and 0 when $x$ is irrational

(Assume $f$ maps real numbers to real numbers in each of the above cases.)
\end{enumerate}

For the purposes of this problem, let $f_2(x)$ = $f(f(x))$, $f_3(x) = f(f(f(x)))$, and so on. More formally, define let $f_1(x) = f(x)$, and $f_k(x) = f(f_{k-1}(x))$.

\item Prove that, if $c$ is a fixed point of $f$, then $c$ is also a fixed point of $f_k$ for all counting numbers $k \geq 1$. (This is a really short proof and may seem obvious, but it will play a key role soon.)
\end{enumerate}
\end{problem}

\begin{problem}

% Let f be a real-valued function.

The "point" of Problem \ref{pr:fp-intro} was preparation for the following general problem: Suppose we have a function $f$, and some value $x_0$. What happens to the sequence $x_0$, $f(x_0)$, $f(f(x_0))$, $f(f(f(x_0)))$, ...? (Does it converge? Does it oscillate? Does it have some strange chaotic behavior?)

\begin{enumerate}[(a)]
\item Let's first consider $f(x) = x/3$. What does this pattern look like for various starting values?
\item Do the same with $f(x) = \cos(x)$.
\item Do the same with $f(x) = 2x$. 
\item Do the same with $f(x) = x/2 + 1$. 
\item Do the same with $f(x) = 4x(1-x)$. % TODO: Reference chaos theory stuff in the references section

While it is difficult to make general statements on the matter (there are whole fields devoted to the intricacies of this topic!), we can actually prove some pretty useful results.

%(We'll use the $f_k$ notation of Problem \ref{pr:fp-intro} to denote iterated functions.)

\item Suppose $f$ is a \emph{continuous} function, and we \emph{know} that, for some starting value $x_0$, the sequence $x_0$, $f(x_0)$, $f(f(x_0))$, $f(f(f(x_0)))$, ... converges to some value (call it $c$). Prove that $c$ is a fixed point of $f$.
\item Suppose $f$ didn't have to be continuous; find a counterexample to the above claim.

In other words, if we find that this sequence converges, it converges to a fixed point. But when does it converge at all? While we cannot cover all cases, we'll try to find some cases where this is true.

% TODO: More parts to this problem that aren't amoeba-related

\item Suppose now that $f$ is a continuous and \emph{increasing} function. Suppose we also choose our "starting point" $x_0$ where $f(x_0) > x_0$, and there is also a fixed point $c > x_0$. Prove that the sequence $x_0$, $f(x_0)$, $f(f(x_0))$, $f(f(f(x_0)))$, ... converges to the closest such fixed point. 

% TODO: Put diagram for this here or in hints?
% TODO: Also put diagram of what happens for multiple fixed points?

% TODO: Insert logical conclusions for f(x_0) < x_0, f is decreasing, etc? (maybe - don't really need them for amoeba problem)


\end{enumerate}
\end{problem}


%%%%%%%% Amoeba problems

\begin{problem}
\label{pr:amoeba-ngen}
Suppose we have an amoeba. It has a probability $p_d$ of dying, and a probability $(1 - p_d)$ of dividing into two amoebas (which themselves have the same probabilities of dying vs. dividing). 

We'll say that the first amoeba is the 0th generation. Then, for any $n$-th generation amoeba, if it divides into children, said offspring are $(n+1)$-th generation amoebas. 

Let $P_d(n)$ be the probability that the family tree dies before the $n$-th generation.\footnote{In other words, the probability that this family tree does not produce an $n$-th generation amoeba.}

% TODO: Show tree figures of what this could look like?

\begin{enumerate}[(a)]
\item What is $P_d(1)$?
\item Find a recursive relation for $P_d(n)$, in terms of $P_d(n-1)$, for $n > 1$. 
\item Suppose we instead had $m$ starting amoebas. What is the probability of dying before the $n$-th generation now? Answer in terms of our original $P_d(n)$.
\item What is the probability that our amoeba family (with 1 starting amoeba) doesn't die out at all -- and simply lives on forever? In particular, under what conditions (i.e. for what values of $p$) is the amoeba family certain to die at some point?
\end{enumerate}
\hfill
\end{problem}

%"Forever" essentially translates to $\lim_{n \rightarrow \infty} P_d(n)$. 

\begin{problem}
\label{pr:amoeba-kdesc}
Suppose we have the situation described in Problem \ref{pr:amoeba-ngen}, but we now have a "magical amoeba" that divides into $k$ children (and so does its descendants, and the descendants after that, etc). 

% TODO: Recommend (somewhere) to solve (and consult our solution) on ngen problem before this one?
\begin{enumerate}[(a)]
\item Intuitively, what should happen to the probability of the family tree's survival (for any $n$ generations and for eternity), as $k$ increases?
\item For what values of $p$ is our "magical amoeba family" certain to die?
\end{enumerate}
\end{problem}

%%%%%%%%%%%%%%

\newpage
\section{Terms and References}

\section{Hints}

\newpage
\section{Solutions}

\subsection{Problem \ref{pr:amoeba-ngen}}

\subsubsection{Part (a)}

$P_d(1)$ is simply the probability that we don't make it to first generation. This will only happen if the first amoeba dies, which happens with probability $p_d$.



\subsubsection{Part (b)}

A recap of the scenario here: We have one amoeba, and we'd like to see whether (or not) it produces a family tree that lives to at least $n$ generations.

% TODO: Potentially bee more clear here. Emphasize using the "divide the world into two possibilities" trick
There are two (mutually exclusive) ways for that amoeba's family tree to die off before then: 
\begin{enumerate}
\item This amoeba dies.
\item This amoeba lives to divide into two, but the family dies off later on.
\end{enumerate} \hfill

Let's clarify the second case a bit more. If our current amoeba has lived to reproduce, then the only way for the family to die out before $n$ generations is if \emph{both} of our children amoebas produce families that die out before $(n-1)$ generations, respective to them. By our definition, each such child amoeba has probability $P_d(n-1)$ of that occurring.

This looks promising recurrence-relation wise! Let's solidify our relation a bit more formally. We have: \footnote{It might seem a bit silly to write "dies in $<n$ generations from parent death" -- after all, not only does it die before the $n$-th generation, it dies before even the first one! But bear with us here.}

\begin{align*}
P_d(n) &:= P(\text{ family dies in $< n$ generations }) \\
&= P(\text{ family dies in $< n$ generations from parent death }) \\
&\qquad + P(\text{ family dies in $< n$ generations from later death }) \\ % mutually exclusive
\end{align*}


Rephrasing this a little bit, we have: \footnote{Note that, in the second equation, we're using the general notion that $P(B \cap A) = P\left(B \middle| A\right) \cdot P(A)$}
\begin{align*}
&= P(\text{ family dies in $< n$ generations AND parent dies }) \\
&\qquad + P(\text{ family dies $< n$ generations AND parent lives }) \\
&= P(\text{ parent dies }) \cdot P\left(\text{ family dies } \middle| \text{ parent dies }\right) \\
&\qquad + P(\text{ parent lives }) \cdot P\left(\text{ family dies } \middle| \text{ parent lives }\right) \\
&= p_d \cdot 1 \\
&\qquad + (1 - p_d) \cdot P\left(\text{ family dies } \middle| \text{ parent lives }\right)
\end{align*}

What is $P\left(\text{ family dies } \middle| \text{ parent lives }\right)$? In other words, what exactly is the probability that, even though the first amoeba divides into two, our family dies in $n$ generations (relative to the first amoeba) anyway? We know that each child amoeba then has to die in less than $(n-1)$ generations, which happens with probability $P_d(n-1)$, and there are two children. The reproduction of each child is independent of the other child, and hence both amoebas must independently have their family lines die under them in order for the amoeba line as a whole to die.

Therefore, 

\begin{align*}
&P\left(\text{ family dies in $<n$ generations } \middle| \text{ parent lives }\right) \\
&= P(\text{ family dies under child 1} \\
&\qquad\text{ AND family dies under child 2 }) \\
&= P\left(\text{ family dies under child 1} \right) \\ 
&\qquad\cdot P\left(\text{ family dies under child 2 } \right) \\
&= P_d(n-1) \cdot P_d(n-1) \\
&= P_d(n-1)^2
\end{align*}

%TODO: Fix super/subscript formatting
%TODO: "Generations" term is wrong, use some other word (like line)

Combining everything above, we get that $p_F$ must satisfy the following relation:

\begin{equation}
P_d(n) = p_d + (1-p_d) \cdot P_d(n-1)^2
\end{equation}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%




% TODO: Philosophize a bit here on what we've done
% e.g. (starting this) This is the trick we've done -- we've managed to show that

Solving this gives $p_F = p_d / (1 - p_d)$ and $p_F = 1$. 

Which of these solutions is correct? 

% TODO: Start by thinking about certain cases (e.g. at p_d > 1/2, first answer is nonsensical; at p_d = 0, second answer is. Also get into what intuitively should happen when p_d > 1/2)

% TODO: Get more into what this relation looks like? (Graph, numerical example at edge cases, etc) instead of (just?) the numerical example below.

% TODO: This problem solution in general should maybe have multiple sections? (Where the first one ends sort of vaguely like above?)


\subsubsection{(Intuition, at least for $p_d > 1/2$ and $p_d = 0$)}

\subsubsection{(Actual fixed-point analysis)}
%%%% subsection

% TODO: Fixed-point theory view? (maybe done mostly in finite problem)


$\square$

%\subsection{(Old solution scraps)}

%\begin{enumerate}
%\item The amoeba itself dies. (This occurs with probability $p_d$.)
%\item The amoeba survives, but dies off in future generations. The probability of the amoeba surviving (denote $P(parent survival)$) is $(1 - p_d)$. The probability of the generation dying off, given survival of the parent amoeba, is $P(gen survival | parent survival) = p_G^2$; this is because the probability of a generation dying, starting from a given amoeba, is $p_G$, and we have to have this occur independently on each child of the original parent. 

%Hence, the probability of this whole chain of events (parent survival and gen survival) is the product of the two quantities above (since $P(A \cap B) = P(B | A)P(A)$), and we get $(1-p_d)p_G^2$. 
%\end{enumerate}

% TODO: Possibly make this more rigorous with probability spaces, etc.

\subsection{Problem \ref{pr:amoeba-kdesc}}

Intuitively (or at the very least, "it feels like") the probability of family death ($p_F$) should decrease as $k$ increases.

More significantly, consider the following phenomenon: The "further one gets" along the family tree, the more likely it seems that the family will survive indefinitely. As a brief example, consider having the one starting amoeba versus the two amoebas that come after it in our original (upon successful reproduction) -- our conditional chances are a lot better in the latter case.\footnote{More precisely, as we found earlier, the chances of death are $p_F^2$ after division, as opposed to $p_F$ before it -- and since $0 \leq p_F \leq 1$, $p_F^2 < p_F$.}

Intuitively, as $k$ increases, the degree to which we're "better off" after our first amoeba should be much higher. 

% TODO: There are a LOT of ways (mathematical and intuitive) to go into this -- do them!
% Perhaps even make subsubsections for them.

Following pretty much the exact same train of logic as in Problem \ref{pr:amoeba-basic}, we get the following relation for $p_F$:

\begin{equation}
p_F = p_d + (1-p_d)p_F^k
\end{equation}

Rearranging this as a more "traditional" polynomial in terms of $p_F$, we get:

\begin{equation}
(1-p_d)p_F^k - p_F + p_d = 0
\end{equation}

% TODO: The fixed-point analysis gets a bit involved here too, bc of where roots actually lie. Get into this more




